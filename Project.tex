%
%  Allocating optional modules to University of York students
%
%  BSc Computer Science/Maths final-year dissertation
%
%  Created by Alex Muller on 2011-10-10.
%  Copyright (c) 2011 Alex Muller. All rights reserved.
%
%  Hand-in checklist:
%    - Margins: inside/top 2cm, outside/bottom 1cm
%    - Landscape pages flow correctly
%    - 'fewer modules/students', not less
%
\documentclass[twoside,draft]{scrartcl}

\usepackage[utf8]{inputenc} % Use utf-8 encoding for foreign characters

% Pages and margins
\usepackage{fullpage}
% To be bound:
\usepackage[top=2cm, bottom=3cm, left=1cm, right=1cm]{geometry}
\geometry{bindingoffset=1cm}
% Digital copy
% \usepackage[top=1cm, bottom=3cm, left=1cm, right=1cm]{geometry}

\setlength{\parskip}{0.14cm plus 0.1cm minus 0.08cm}

% \usepackage{fancyhdr} % Running Headers and footers
% \usepackage{subfigure} % Multipart figures
% \usepackage{amsmath,amssymb,latexsym} % More symbols

\usepackage{boxedminipage} % Surround parts of graphics with box
\usepackage{lastpage} % Number of pages

\usepackage{xcolor} % Syntax highlighting etc
\definecolor{light-gray}{gray}{0.5}
\definecolor{yorkblue}{RGB}{0,38,99}
\definecolor{yorkgreen}{RGB}{24,69,59}

% Each section should start on a new page
\let\stdsection\section
\renewcommand\section{\clearpage\stdsection}

% Listings package for including code
\usepackage{listings,multicol}
\lstset{
  basicstyle = \ttfamily\footnotesize,
  commentstyle = \color{light-gray},
  numbers = left,
  numberstyle = \tiny,
  stepnumber = 20,
  numbersep = 10pt,
  frame = single,
  rulecolor = \color{light-gray},
}
\lstloadlanguages{HTML,Java}

\usepackage{upquote}

\usepackage{algorithmic,setspace}
\algsetup{indent=2em}

% This is now the recommended way for checking for PDFLaTeX:
\usepackage{ifpdf}

\ifpdf
\usepackage[pdftex]{graphicx}
\else
\usepackage{graphicx}
\fi

\ifpdf
\usepackage[pdftex]{hyperref}
\else
\usepackage{url}
\fi

\ifpdf
\usepackage{pdflscape}
\else
\usepackage{lscape}
\fi

\usepackage{pdfpages}

\usepackage{ifdraft}

\usepackage{libs/gantt} % Gantt chart

\usepackage[T1]{fontenc}

\usepackage{fancyvrb}

% Macros
\usepackage{xspace} 
\newcommand{\studmod}{\emph{student, module}\xspace}

\makeatletter 
\newcommand\mynobreakpar{\par\nobreak\@afterheading} 
\makeatother

% Glossary
\usepackage[toc]{glossaries}
\makeglossaries
\input{references/glossary.tex}

% Title page stuff
\def\paperauthor{Alexander Muller}
\def\papertitle{Allocating optional modules \\ to University of York students}
\def\paperlength{20,600}

\title{\papertitle}
\author{\paperauthor}
\date{\today}

% PDF Properties
\hypersetup{
  pdftitle = {\papertitle},
  pdfauthor = {\paperauthor},
  pdfsubject = {A final-year BSc Computer Science project to allocate university modules},
  pdfkeywords = {york, computer science, webapp, university, module, allocation}
}


\begin{document}

\ifpdf
\DeclareGraphicsExtensions{.pdf, .jpg, .tif}
\else
\DeclareGraphicsExtensions{.eps, .jpg}
\fi

\maketitle

This is the report for a Bachelor of Science final-year project in Computer
Science and Mathematics at the University of York. The project was supervised
by Dr James Cussens, Senior Lecturer in the Artificial Intelligence Group,
Department of Computer Science.

This report is \paperlength{} words, as counted by running \texttt{detex} and
\texttt{wc -w}. It is \pageref{LastPage} pages long. The word count does not
include any of the files or code listings in the appendices.

% The limits are 35,000 words and 70 pages - neither limit may be exceeded.
% Other projects I've seen have been 12,000/60, 11,000/60, 21,000/71 etc

The author is very grateful for all the assistance provided by the staff and
students at the University of York who were involved in the project, but
especially to James Cussens for his advice throughout and to Laura Crossley
for her management of the project on behalf of the University.

\clearpage

\begin{abstract}
  % Couple of paras. Not more than 200 words - this is 211.

  From the second year onwards, most students at the University of York can
  choose between two or more optional modules to tailor their academic career,
  in the hope that it will be more relevant, interesting and useful to them.
  There is currently no standard system for optional module allocation at the
  University of York. In some departments it is handled using a paper form
  which must be returned to departmental administrators and processed
  manually, which is a time-consuming process.
  
  This project aims to design and implement web-based software that can be
  used by departments and students to allocate modules more fairly and with
  less administrative overhead. Allocating modules ``fairly'' involves
  understanding how staff and students view fair allocation, and translating
  that into a constrained optimisation problem solvable by a computer.
  
  The web application is trialled by the University of York's Archaeology and
  History departments in Spring 2012 and, if successful, will be offered to
  all departments and maintained centrally by the University's IT Services.
  
  This report discusses the choices made around the technology used, the
  development methodology and details relating to the allocation algorithm. It
  details specifics about the implementation, problems that arose and how they
  were mitigated, and some further work that could be carried out to improve
  the software.
\end{abstract}

\clearpage
\tableofcontents

\clearpage
\listoffigures
% \listoftables

\section{Statement of ethics}

% Informed consent

Those people volunteering to help with the project (interviewed during the
research stage) will at no point be put in a position of physical danger.
Consent will be obtained from all volunteers prior to their interview, and
volunteers' personal information will not be published or shared. A copy of
the consent form signed by all volunteers is given in
Appendix~\ref{sec:consent}. Whenever a member of the University has been
quoted by name in this project, their explicit consent was obtained
beforehand.

% Do no harm

As far as the project author is aware, there are no immediate ethical issues
relating to the creation of the module allocation software. However, there is
always the potential that any software will be repurposed for an unforeseen
use.

% Confidentiality of data

The project steering group has noted that as a student, the author must not be
given access to any sensitive personal information. This includes, but is not
limited to, student names, email addresses and degree course information.
Development and testing of the software will be carried out with test data
that it is in a similar form to genuine student data held by the University.
The University's Data Protection Officer was consulted during the project, and
his input is discussed in Section~\ref{sec:dataprotection}.

The project author signed a \gls{nda} provided by \gls{itservices} in order to
clarify the situation regarding access to student data. A copy of this
\gls{nda} is provided in Appendix~\ref{sec:nda}. It states that confidential
information must not be disclosed at any time.

\input{sections/introduction.tex}

\input{sections/projmanagement_main.tex}

\input{sections/projmanagement_schedule.tex}

\input{sections/research_main.tex}

\input{sections/research_devmethodology.tex}

\input{sections/research_database.tex}

\input{sections/research_maintainability.tex}

\input{sections/research_frameworks.tex}

\input{sections/research_dpa.tex}

\input{sections/research_security.tex}

\input{sections/research_usertesting.tex}

\input{sections/research_usability.tex}

\input{sections/research_ilp.tex}

% \subsection{Unit testing and performance testing}
% 
% If there's time...

\section{Development, implementation and testing}
\label{sec:implementation}

% Several chapters describing what you have done, focusing on the novel
% aspects of your own work.

After reviewing the information gathered in the previous section, the software
was researched, written and tested. This section describes how users helped
influence the design of the software during interviews, a discussion on web
frameworks, the visual appearance and other important factors for web
projects. Information from departments that informed the allocation problem is
given, and the process surrounding the allocation is discussed.

\input{sections/development_user_research.tex}

\input{sections/development_database_structure.tex}

\input{sections/development_webapp_frameworks.tex}

\input{sections/development_supporting_software.tex}

\subsection{Design decisions and visual appearance}

The application should be visually consistent with other University web
software to instill trust in the user.

The University's Web Office (part of the Communications Office) was contacted
to enquire whether the application should be branded using the standard green
banner, or as a part of the student portal.

% Following the principle of least astonishment...

% http://en.wikipedia.org/wiki/Principle_of_least_astonishment

% Include screenshots of University software:
%   https://www.york.ac.uk/it-services/facilities/account/accounts
%   https://www.cs.york.ac.uk/submit/assessment/
%   https://www.york.ac.uk/students/

One area that usability gains can be made are in relation to how the
application saves data. During one of the user research sessions, the
participant explained that while choosing optional modules during her first
year, she neglected to press that application's ``OK'' button and, unaware
that she had not submitted choices, was unable to take her preferred modules.

As an explicit ``Save'' button should be retained to reduce surprise and allow
the user to feel in control, the most sensible decision is to automatically
save user input periodically and notify users that their choices are being
saved. The submit button would save data in case of failure of the automatic
save mechanism.

\begin{landscape}
  \begin{figure}
    \begin{minipage}[b]{0.49\linewidth}
      \centering
      \includegraphics[width=\linewidth]{images/2011_11_06_yorkacuk.png}
      \caption{A general page on the University site, using University colours}
      \label{yorkacuk_general_page}
    \end{minipage}
    \hspace{0.5cm}
    \begin{minipage}[b]{0.48\linewidth}
      \centering
      \includegraphics[width=\linewidth]{images/2011_11_06_yorkacuk_directory.png}
      \caption{The University of York People Directory search tool}
      \label{yorkacuk_directory_search}
    \end{minipage}
  \end{figure}
\end{landscape}

\subsection{Accessibility}

% http://www.york.ac.uk/communications/websites/policies/accessibility/

Educational institutions such as the University of York are required by the
\gls{senda} 2001 to ensure that web content is accessible to disabled users.
The Web Office provides advice to those publishing web sites or applications
on behalf of the University at
\url{http://www.york.ac.uk/communications/websites/content/accessibility/}.
While this advice is more applicable to content-heavy areas such as department
websites for student recruitment, it still contains some things to consider
while building a web application.

% Perceivable
% Operable
% Understandable
% Robust

The two major accessibility issues surrounding a web application are users who
are visually impaired and users who are unable to use a keyboard and/or mouse
to browse the web.

To mitigate the first accessibility issue, the application was tested to
ensure that users can increase the page or font size to fit their needs. Users
who use custom style sheets in their web browser (for example to enhance
contrast) are able to do so.

All text and background colour combinations were tested to ensure compliance
with WCAG AAA.

% http://www.snook.ca/technical/colour_contrast/colour.html

As to the second accessibility issue, generally speaking, users who are unable
to use a keyboard or mouse do not use JavaScript in their web browser. The
application is designed so that users with JavaScript disabled are instead
presented a simple form layout that can be read out to them by screen-reading
software and filled in solely with a keyboard (which can be voice controlled).

It is thought with these considerations, every student will be able to use the
system to select their modules. However, even if the above fallbacks fail the
student will still be able to obtain help from their department (which could
complete the module selection on their behalf). The aim is that no student
will be stranded with an application they cannot use and no instructions
telling them how to gain assistance.

% Finally, the student interface was tested by Mr David Swallow, a Research
% Associate in the \gls{hci} research group at the University of York. Mr
% Swallow commented that ``on the whole, the accessibility of the application
% is excellent and passes many of the checkpoints where other applications
% slip up''. He did, however, note several minor issues with the application.

\subsection{Interaction with other University software}

The system will be required to interact with \gls{sits}, as this is the
centrally maintained database that must always contain a true and accurate
representation of a student's data. Data stored in \gls{sits} is used throughout
the University, including for timetabling and room allocation.

This system will interact with data stored in \gls{sits} at two points:

\begin{enumerate}
  \item Module and student data must be imported during setup
  \item Module allocation data must be exported after the allocation algorithm has run
\end{enumerate}

The import and setup will be performed by departmental administrators. This
decision was taken to reduce the amount of time required from \gls{ssdt},
especially as administrators will need to spend time tailoring the system to
their department after the import has taken place.

For the pilot of this module allocation software, the data produced by the
application will be processed manually by \gls{mh}. He will perform a ``sanity
check'' to ensure that the data generated by the application looks accurate
and will import it into \gls{sits}. If this application is evaluated
successfully and maintained centrally, it will not be feasible to import the
data manually for each department and some kind of automatic import will have
to be developed (discussed later in Section~\ref{sec:autoexport}).

\input{sections/development_algorithm.tex}

\input{sections/development_assistance_its.tex}

\input{sections/development_issues_arising.tex}

\input{sections/development_testing.tex}

\input{sections/development_software_overview.tex}

\input{sections/development_pilot.tex}

\input{sections/futurework.tex}

\input{sections/conclusion.tex}

\clearpage
\appendix

\stdsection{Participant consent form}
\label{sec:consent}

Research participants (students and staff of the University of York) signed
the consent form shown in Figure~\ref{participantconsent} before their
interview took place. This form is adapted from one made available by Alistair
Edwards for Computer Science students to use during their projects. As of 5
November 2011, the original is at
\url{http://www-users.cs.york.ac.uk/~alistair/projects/consent.html}.

In each case, the top half of the form was retained by the project author and
the second half was given to the participant in case they had any further
questions about the interview.

\stdsection{Confidentiality and non-disclosure agreement}
\label{sec:nda}

The \gls{nda} shown in Figure~\ref{confidentialitynda} was signed by the
project implementer and the Head of Web Services at the University of York.

\stdsection{Paper forms used for module selection}
\label{sec:paperforms}

Figures~\ref{paperformarchaeology1} and \ref{paperformhistory1} show
paper forms used by each of the pilot departments to allow students to rank
their modules in order of preference.

\begin{figure}
  \begin{center}
    \fbox{\includegraphics[width=0.9\linewidth]{inc/itservices_nda.pdf}}
  \end{center}
  \caption{University of York confidentiality and non-disclosure agreement}
  \label{confidentialitynda}
\end{figure}

\begin{landscape}
  \begin{figure}
    \begin{minipage}[b]{0.48\linewidth}
      \centering
      \fbox{\includegraphics[width=0.9\linewidth]{images/consent.pdf}}
      \caption{Participant consent form}
      \label{participantconsent}
    \end{minipage}
    \hspace{0.5cm}
    \begin{minipage}[b]{0.49\linewidth}
      \centering
      \fbox{\includegraphics[width=0.9\linewidth]{inc/paperformarchaeology1.pdf}}
      \caption{A paper form given to Archaeology students to select modules}
      \label{paperformarchaeology1}
    \end{minipage}
  \end{figure}
\end{landscape}

\begin{landscape}
  \begin{figure}
    \begin{center}
      \fbox{\includegraphics[width=0.9\linewidth]{inc/paperformhistory1.pdf}}
    \end{center}
    \caption{A paper form given to History students to select modules}
    \label{paperformhistory1}
  \end{figure}
\end{landscape}

\stdsection{Prototypes of the student interface}
\label{sec:prototypes}

Figures~\ref{prototype_student_1col}, \ref{prototype_student_weighting} and
\ref{prototype_student_2col} give screenshots of the prototypes created for
the student interface for ranking modules.

Note that the explanatory copy included in the screenshots was drafted
by the project implementer and was revised by the departments prior to the
system being in use.

\begin{figure}
  \begin{center}
    \includegraphics[width=0.85\linewidth]{images/prototypes/student_prototype_1.png}
  \end{center}
  \caption{Prototype of a drag-and-drop ranking based system}
  \label{prototype_student_1col}
\end{figure}

\begin{figure}
  \begin{center}
    \includegraphics[width=0.85\linewidth]{images/prototypes/student_prototype_2.png}
  \end{center}
  \caption{Prototype of draggable bars for a weighting based system}
  \label{prototype_student_weighting}
\end{figure}

\begin{figure}
  \begin{center}
    \includegraphics[width=0.85\linewidth]{images/prototypes/student_prototype_3.png}
  \end{center}
  \caption{Prototype of a drag-and-drop two-column ranking based system}
  \label{prototype_student_2col}
\end{figure}

\stdsection{Feedback from test users}
\label{sec:testingfeedback}

\subsection{Focus groups with students}

\begin{itemize}
  \item Students have the expectation that they should have to rank every module
  \item The two-column layout is similar to the way \gls{yusu} voting works
  \item The system should send an email confirmation to students
\end{itemize}

\subsection{Final application on development server}

\begin{itemize}
  \item Form validation improvements (mentioned three times)
  \item Random ordering of modules on confirmation screen (two times)
  \item Parts of explanatory text unclear (two times)
  \item Students should not be required to rank every module (once)
\end{itemize}

\clearpage

\stdsection{Application documentation}
\label{sec:documentation}

The following documentation was provided to every departmental administrator
in advance of the application being open to students (27 February). It was
also used as the basis for the \gls{itservices} security review that is
discussed in Section~\ref{sec:securityreview} (15 February).

\includepdf[pages=-, frame=true, nup=2, landscape=true]{inc/documentation.pdf}


\begin{landscape}
  \stdsection{Gurobi optimisation code}
  \label{sec:gurobicode}
  
  This appendix contains the code used to allocate the modules to students. Some
  syntax has been modified to fit the constraints of the page and some
  superfluous code has been removed, but otherwise it is unmodified.
  
  \lstset{
    language     = Java,
    multicols    = 2,
    basicstyle   = \ttfamily\tiny,
    keywordstyle = \color{yorkblue}
  }
  \lstinputlisting{listings/AdminAllocate.java}
\end{landscape}

\clearpage
\printglossaries

\clearpage
\bibliographystyle{references/IEEEtran.bst} % not just plain
\bibliography{references/references.bib}
\addcontentsline{toc}{section}{References}


\end{document}
